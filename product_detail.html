{% extends 'app/base.html' %} {% block content %}

<div class="container mt-5">
  <div class="row">
    <div class="col-md-6">
      <img
        src="{{ product.image.url }}"
        class="img-fluid"
        alt="{{ product.product_name }}"
      />
    </div>
    <div class="col-md-6">
      <h1>{{ product.product_name }}</h1>
      <p>{{ product.description }}</p>
      <p>Price: ${{ product.price }}</p>
      <p>Stocks Available: {{ product.stocks_available }}</p>

      <!-- Add to Cart Button -->
      <!-- Add to Cart Form -->
      <form
        method="post"
        action="{% url 'product_detail' product.product_id %}"
      >
        {% csrf_token %}

        <!-- Quantity Dropdown -->
        <div class="form-group">
          <label for="quantity">Quantity:</label>
          <select name="quantity" id="quantity" class="form-control">
            {% for qty in quantity_range %}
            <option value="{{ qty }}">{{ qty }}</option>
            {% endfor %}
          </select>
        </div>

        <!-- Add to Cart Button -->
        <button type="submit" class="btn btn-primary">Add to Cart</button>
      </form>
    </div>
  </div>

  <!-- Comments and Reviews Section -->
  <div class="mt-5">
    <h2>Comments and Reviews</h2>
    <!-- Add a form for adding comments/reviews if needed -->
    <!-- Example: -->
    <form method="post" action="{}">
      {% csrf_token %}
      <label for="rating">Rating:</label>
      <select name="rating" id="rating">
        <option value="5">5 stars</option>
        <option value="4">4 stars</option>
        <option value="3">3 stars</option>
        <option value="2">2 stars</option>
        <option value="1">1 star</option>
      </select>
      <br />
      <label for="comment">Comment:</label>
      <textarea name="comment" id="comment" rows="4"></textarea>
      <br />
      <button type="submit" class="btn btn-primary">Submit Review</button>
    </form>

    <!-- Display existing reviews/comments -->
    {% for review in product.review_set.all %}
    <div class="card mt-3">
      <div class="card-body">
        <h5 class="card-title">Rating: {{ review.rating }}</h5>
        <p class="card-text">{{ review.comment }}</p>
        <!-- Add more details or formatting as needed -->
      </div>
    </div>
    {% empty %}
    <p>No reviews yet.</p>
    {% endfor %}
  </div>
</div>

{% endblock content %}
